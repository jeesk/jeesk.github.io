<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="å±±é—´è‰å¤«çš„å°ç«™ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="å±±é—´è‰å¤«çš„å°ç«™ Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/java/rss.xml" title="å±±é—´è‰å¤«çš„å°ç«™ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/java/atom.xml" title="å±±é—´è‰å¤«çš„å°ç«™ Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/database/rss.xml" title="å±±é—´è‰å¤«çš„å°ç«™ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/database/atom.xml" title="å±±é—´è‰å¤«çš„å°ç«™ Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/microservice/rss.xml" title="å±±é—´è‰å¤«çš„å°ç«™ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/microservice/atom.xml" title="å±±é—´è‰å¤«çš„å°ç«™ Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/data-structure-and-algorithm/rss.xml" title="å±±é—´è‰å¤«çš„å°ç«™ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/data-structure-and-algorithm/atom.xml" title="å±±é—´è‰å¤«çš„å°ç«™ Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/devops/rss.xml" title="å±±é—´è‰å¤«çš„å°ç«™ RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/devops/atom.xml" title="å±±é—´è‰å¤«çš„å°ç«™ Atom Feed"><title data-react-helmet="true">3 posts tagged with &quot;log&quot; | å±±é—´è‰å¤«çš„å°ç«™</title><meta data-react-helmet="true" property="og:title" content="3 posts tagged with &quot;log&quot; | å±±é—´è‰å¤«çš„å°ç«™"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://shanjiancaofu.com/java/tags/log"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="blog_tags_posts"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://shanjiancaofu.com/java/tags/log"><link data-react-helmet="true" rel="alternate" href="https://shanjiancaofu.com/java/tags/log" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://shanjiancaofu.com/java/tags/log" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.7ec3e632.css">
<link rel="preload" href="/assets/js/runtime~main.d6c809c7.js" as="script">
<link rel="preload" href="/assets/js/main.0c9f8076.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/avtor.png" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/avtor.png" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">å±±é—´è‰å¤«</b></a><a class="navbar__item navbar__link" href="/docs/intro">æºç åˆ†æ</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/java">Java</a><a class="navbar__item navbar__link" href="/devops">Devops</a><a class="navbar__item navbar__link" href="/data-structure-and-algorithm">æ•°æ®ç»“æ„ä¸ç®—æ³•</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/jeesk" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ğŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ğŸŒ</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-tags-post-list-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_a9qW thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_uKok margin-bottom--md">All Blog Posts</div><ul class="sidebarItemList_Kvuv"><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/java/elasticsearch-user-rtb-ad">Elasticsearch åœ¨ç«ä»·å¹¿å‘Šä¸­çš„æ£€ç´¢ä½¿ç”¨</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/java/java-bio-diffrent-from-nio">Java BiOå’ŒNIOçš„åŒºåˆ«</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/java/spring-boot-mercy-flink">Spring-boot æ•´åˆflink æ•™ç¨‹</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/java/java-log-adapter-study">JAVA å¸¸è§æ—¥å¿—ä¾èµ–å¤„ç†ç»†èŠ‚</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/java/kafka-msg-keep-ordered">kafkaæ¶ˆæ¯é¡ºåºä¿æŒä¸€è‡´æ€§çš„å¤„ç†æ–¹å¼</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/java/webflux-vs-servlet3.0-pressure-test">webflux,kakfa,redis,protostuff ååé‡ä¼˜åŒ–è¿‘4000QPS</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/java/java-opt-note">java æ€§èƒ½ä¼˜åŒ–ç¬”è®°</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/java/java-threadpool-config-opt-adivse">ThreadPoolExecutorå‚æ•°è¯¦è§£å’Œä¼˜åŒ–å»ºè®®</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/java/log4j-print-log">log4jæ‰“å°æ—¥å¿—çš„åŸç†</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>3 posts tagged with &quot;log&quot;</h1><a href="/java/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/java/java-log-adapter-study">JAVA å¸¸è§æ—¥å¿—ä¾èµ–å¤„ç†ç»†èŠ‚</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2020-11-01T00:00:00.000Z" itemprop="datePublished">November 1, 2020</time> Â· <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://shanjiancaofu.com" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_o0gy" src="https://shanjiancaofu.com/img/avtor.png" alt="jeesk"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://shanjiancaofu.com" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">jeesk</span></a></div><small class="avatar__subtitle" itemprop="description">java engineer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h4 class="anchor anchorWithStickyNavbar_mojV" id="æœ¬æ–‡å¹¶ä¸è®¾ç½®æŸä¸ªæ—¥å¿—æ¡†æ¶çš„é…ç½®åªæ˜¯ä»‹ç»å…¶ä»–æ—¥å¿—æ¡†æ¶å’Œslf4j-çš„åˆ‡æ¢ä¸æ¡¥æ¥é…åˆä½¿ç”¨">æœ¬æ–‡å¹¶ä¸è®¾ç½®æŸä¸ªæ—¥å¿—æ¡†æ¶çš„é…ç½®,åªæ˜¯ä»‹ç»å…¶ä»–æ—¥å¿—æ¡†æ¶å’Œslf4j çš„åˆ‡æ¢ä¸æ¡¥æ¥é…åˆä½¿ç”¨<a class="hash-link" href="#æœ¬æ–‡å¹¶ä¸è®¾ç½®æŸä¸ªæ—¥å¿—æ¡†æ¶çš„é…ç½®åªæ˜¯ä»‹ç»å…¶ä»–æ—¥å¿—æ¡†æ¶å’Œslf4j-çš„åˆ‡æ¢ä¸æ¡¥æ¥é…åˆä½¿ç”¨" title="Direct link to heading">â€‹</a></h4><blockquote><p> å½“ä½ çš„é¡¹ç›®ä¸­æœ‰spring ,kafka, hbase , hadoop ç­‰æ¡†æ¶çš„æ—¶å€™, æ—¥å¿—ä¾èµ–æ··ä¹±,å„ç§pomçœ¼èŠ±ç¼­ä¹±, çœ‹äº†ä¸‹é¢çš„æ–‡å­—, è®©ä½ è½»æ¾æŒæ¡å„ç§æ—¥å¿—æ¡†æ¶çš„æ··åˆä½¿ç”¨å’Œå«æ¥.</p></blockquote><h5 class="anchor anchorWithStickyNavbar_mojV" id="å„ç§åŒ…ä»‹ç»">å„ç§åŒ…ä»‹ç»<a class="hash-link" href="#å„ç§åŒ…ä»‹ç»" title="Direct link to heading">â€‹</a></h5><ol><li><p>log4j</p><ul><li><code>log4j</code> : å®ç°å’Œæ¥å£éƒ½åœ¨è¿™ä¸ªåŒ…</li></ul></li><li><p>log4j2</p><ul><li><p><code>log4j-core</code> : æ ¸å¿ƒåŒ…,æ—¥å¿—å®ç°</p></li><li><p><code>log4j-api</code> : æ—¥å¿—api</p></li></ul></li><li><p>logback</p><ul><li><p><code>logback-core</code> : logback æ ¸å¿ƒåŒ…</p></li><li><p><code>logback-classic</code> : å®ç°åŒ…,å®ç°äº†slf4j-api</p></li></ul></li><li><p>commons-logging</p><ul><li><p><code>commons-logging</code> : jclçš„åŸç”Ÿå…¨éƒ¨å†…å®¹</p></li><li><p><code>log4j-jcl</code> : jclåˆ°log4j2çš„æ¡¥æ¢ , ä½¿ç”¨jclçš„å®ç°, ä½†æ˜¯ä½¿ç”¨log4j2çš„æ¥å£</p></li><li><p><code>jcl-over-slf4j</code> ï¼šjclåˆ°slf4jçš„æ¡¥æ¢,ä½¿ç”¨slf4j çš„api, æ—¥å¿—æ‰“å° å®ç°ä½¿ç”¨jcl</p></li></ul></li></ol><h2 class="anchor anchorWithStickyNavbar_mojV" id="æ—¥å¿—æ¡†æ¶åŒ…çš„åˆ†ç±»">æ—¥å¿—æ¡†æ¶åŒ…çš„åˆ†ç±»<a class="hash-link" href="#æ—¥å¿—æ¡†æ¶åŒ…çš„åˆ†ç±»" title="Direct link to heading">â€‹</a></h2><ol><li><p>api åŒ…, è¿™ç§åŒ…åªæœ‰æ¥å£, æ¯”å¦‚slf4j-api, log4j-api ,æ¯ä¸ªæ—¥å¿—æ¡†æ¶éƒ½è¦è‡ªå·±api.</p></li><li><p>å®ç°åŒ…, æ¯”å¦‚slf4j-api çš„å®ç°æœ‰logback-classic, log4j-apiçš„å®ç°æœ‰log4j.</p></li><li><p>æ¡¥æ¥å™¨ æ—¥å¿—ç»Ÿä¸€ç®¡ç†ä½¿ç”¨slf4j, ä½†æ˜¯å®ç°ç”¨çš„jcl, æˆ–è€…jul,æˆ–è€…log4j , ä½†æ˜¯è¿™äº›å®ç°éƒ½ä¸æ˜¯slf4jçš„apiçš„å®ç°,åªèƒ½æä¾›æ¡¥æ¥å™¨,å°†slf4j æ‰“å°çš„æ—¥å¿—, äº¤ç»™å…·ä½“çš„å®ç°å»æ“ä½œ, è¿™é‡Œçš„æ¡¥æ¥å™¨ä¹Ÿå¯ä»¥å«åšé©±åŠ¨.</p></li><li><p>åˆ‡æ¢å™¨, æˆ‘éœ€è¦å°†log4j åˆ‡æ¢åˆ°Logback , è¿™ä¸ªæ—¶å€™, æˆ‘å¯ä»¥ä½¿ç”¨slf4jæä¾›çš„å‡åŒ…, æ›¿æ¢åŸæœ‰çš„å®ç°ç±», ç„¶åå°†æ—¥å¿—é‡æ–°äº¤ç»™slf4jç®¡ç†. æ¯”å¦‚, é¡¹ç›®ä½¿ç”¨çš„æ˜¯Log4j, é‚£ä¹ˆç›´æ¥ä½¿ç”¨ <code>log4j-over-slf4j</code> æ›¿æ¢log4j å³å¯. (å…¶å®åœ¨å¾ˆå¤šçš„æ–‡ç« ä¸­å¹¶æ²¡æœ‰åˆ‡æ¢å™¨è¿™ä¸ªæ¦‚å¿µ, åŒ…æ‹¬mavençš„åˆ†ç±»ä¸­, ä½†æ˜¯ä¸ºäº†åŒºåˆ†åŠŸèƒ½, è¿™é‡Œæˆ‘è¿˜æ˜¯åŒºåˆ†å‡ºæ¥äº†)</p></li></ol><h5 class="anchor anchorWithStickyNavbar_mojV" id="æ¡¥æ¥å™¨åŒ…">æ¡¥æ¥å™¨åŒ…<a class="hash-link" href="#æ¡¥æ¥å™¨åŒ…" title="Direct link to heading">â€‹</a></h5><blockquote><p>ä»€ä¹ˆæ˜¯æ¡¥æ¥å™¨, å°±æ˜¯æŸä¸ªæ—¥å¿—çš„å…·ä½“å®ç°, è¦æƒ³é…åˆslf4jçš„apiä½¿ç”¨, ä½†æ˜¯åœ¨ä½¿ç”¨slf4j çš„apiçš„æ‰“å°, æ— æ³•æ‰¾åˆ°å¯¹åº”çš„å®ç°ç±»,  è¿™ä¸ªæ—¶å€™éœ€è¦ç¬¬ä¸‰æ–¹åŒ…æ¡¥æ¥ä¸€ä¸‹, å½“slf4j æ‰“å°æ—¥å¿—çš„æ—¶å€™,äº¤ç»™å…·ä½“çš„æ—¥å¿—å®ç°ç±».</p></blockquote><ol><li><p><code>slf4j-jdk14</code> ï¼šslf4jåˆ°jdk-loggingçš„æ¡¥æ¢</p></li><li><p><code>slf4j-log4j12</code> ï¼šslf4jåˆ°log4j1çš„æ¡¥æ¢</p></li><li><p><code>log4j-slf4j-impl</code> ï¼šslf4jåˆ°log4j2çš„æ¡¥æ¢</p></li><li><p><code>logback-classic</code> ï¼šslf4jåˆ°logbackçš„æ¡¥æ¢</p></li><li><p><code>slf4j-jcl</code> ï¼šslf4jåˆ°commons-loggingçš„æ¡¥æ¢</p></li></ol><h5 class="anchor anchorWithStickyNavbar_mojV" id="åˆ‡æ¢å™¨åŒ…-å·å¤©æ¢æ—¥-slf4j-æä¾›äº†å…¶ä»–æ—¥å¿—çš„åŒ…-æ›¿æ¢äº†åŸæ¥çš„ç¨‹åº-ç›´æ¥å°†æ—¥å¿—äº¤ç»™äº†slf4jç®¡ç†-å¹¶ä¸”ä¸éœ€è¦æ›´æ”¹ä»£ç -ä½†æ˜¯jul-é™¤å¤–">åˆ‡æ¢å™¨åŒ…( å·å¤©æ¢æ—¥, slf4j æä¾›äº†å…¶ä»–æ—¥å¿—çš„åŒ…, æ›¿æ¢äº†åŸæ¥çš„ç¨‹åº, ç›´æ¥å°†æ—¥å¿—äº¤ç»™äº†slf4jç®¡ç†, å¹¶ä¸”ä¸éœ€è¦æ›´æ”¹ä»£ç . ä½†æ˜¯jul é™¤å¤–)<a class="hash-link" href="#åˆ‡æ¢å™¨åŒ…-å·å¤©æ¢æ—¥-slf4j-æä¾›äº†å…¶ä»–æ—¥å¿—çš„åŒ…-æ›¿æ¢äº†åŸæ¥çš„ç¨‹åº-ç›´æ¥å°†æ—¥å¿—äº¤ç»™äº†slf4jç®¡ç†-å¹¶ä¸”ä¸éœ€è¦æ›´æ”¹ä»£ç -ä½†æ˜¯jul-é™¤å¤–" title="Direct link to heading">â€‹</a></h5><blockquote><p>ä»€ä¹ˆæ˜¯åˆ‡æ¢å™¨, å°±æ˜¯å½“ä¸€ä¸ªæ¨¡å—ä½¿ç”¨äº†ä»–è‡ªå·±çš„æ—¥å¿—å®ç°å’Œapi , ä½†æ˜¯æƒ³å°†æ—¥å¿—çš„è¾“å‡ºäº¤ç»™slf4j ç®¡ç†. è¿™ä¸ªæ—¶å€™éœ€è¦ä¸€ä¸ªåˆ‡æ¢å™¨å°†ç¬¬ä¸‰æ–¹æ¨¡å—çš„æ—¥å¿—åˆ‡æ¢åˆ°slf4j.</p></blockquote><ol><li><p><code>jul-to-slf4j</code> ï¼šjdk-loggingåˆ°slf4jçš„æ¡¥æ¢, å°†jul æ—¥å¿—äº¤ç»™slf4jç®¡ç†, è¿™ä¸ªåŒ…ä¸èƒ½å’Œslf4j-jdk14 å…±å­˜, å¦åˆ™ä¼šå¯¼è‡´æ— é™å¾ªç¯.</p></li><li><p><code>jcl-over-slf4j</code> ï¼šcommons-loggingåˆ°slf4jçš„æ¡¥æ¢,commons-logging.jaræ›¿æ¢ ä¸º jcl-over-slf4j.jar, å°†jclçš„æ—¥å¿—äº¤ç»™slf4jç®¡ç†.</p></li><li><p><code>slf4j-jcl.jar</code> : æˆ‘ä»¬çš„ä¸€äº›ç”¨æˆ·åœ¨åˆ‡æ¢åˆ° SLF4J API åæ„è¯†åˆ°ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒJCL çš„ä½¿ç”¨æ˜¯å¼ºåˆ¶æ€§çš„ï¼Œä»–ä»¬ä½¿ç”¨ SLF4J å¯èƒ½æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚å¯¹äºè¿™ç§ä¸å¸¸è§ä½†å¾ˆé‡è¦çš„æƒ…å†µï¼ŒSLF4J æä¾›äº† JCL ç»‘å®šï¼Œå¯åœ¨æ–‡ä»¶slf4j-jcl.jar ä¸­æ‰¾åˆ°ã€‚JCL ç»‘å®šä¼šå°†é€šè¿‡ SLF4J API è¿›è¡Œçš„æ‰€æœ‰æ—¥å¿—è®°å½•è°ƒç”¨å§”æ‰˜ç»™ JCLã€‚å› æ­¤ï¼Œå¦‚æœç”±äºæŸç§åŸå› ç°æœ‰åº”ç”¨ç¨‹åºå¿…é¡» ä½¿ç”¨ JCLï¼Œé‚£ä¹ˆæ‚¨çš„åº”ç”¨ç¨‹åºéƒ¨åˆ†ä»ç„¶å¯ä»¥ä»¥å¯¹æ›´å¤§çš„åº”ç”¨ç¨‹åºç¯å¢ƒé€æ˜çš„æ–¹å¼é’ˆå¯¹ SLF4J API è¿›è¡Œç¼–ç ã€‚æ‚¨é€‰æ‹©çš„ SLF4J API å¯¹å¯ä»¥ç»§ç»­ä½¿ç”¨ JCL çš„åº”ç”¨ç¨‹åºçš„å…¶ä½™éƒ¨åˆ†æ˜¯ä¸å¯è§çš„ã€‚ è¿™ç§æƒ…å†µä¸‹. jcl-overslf4j.jar-ä¸å¯ä¸slf4j-jcl.jar åŒæ—¶ä½¿ç”¨.</p></li><li><p><code>log4j-over-slf4j</code> ï¼šlog4j1åˆ°slf4jçš„æ¡¥æ¢, è€Œåªéœ€å°†log4j.jaræ–‡ä»¶æ›¿æ¢ä¸º log4j-over-slf4j.jar.</p></li><li><p><code>log4j-to-slf4j</code> log4j2 åˆ°slf4jçš„æ¡¥æ¢, å°†log4j2çš„æ—¥å¿—ç§»äº¤ç»™slf4j, åŸæ–‡ <a href="https://logging.apache.org/log4j/2.x/log4j-to-slf4j/index.html" target="_blank" rel="noopener noreferrer">åŸæ–‡</a>.</p></li></ol><h4 class="anchor anchorWithStickyNavbar_mojV" id="æ—¥å¿—æ–¹æ¡ˆ">æ—¥å¿—æ–¹æ¡ˆ:<a class="hash-link" href="#æ—¥å¿—æ–¹æ¡ˆ" title="Direct link to heading">â€‹</a></h4><h5 class="anchor anchorWithStickyNavbar_mojV" id="ç›´æ¥ä½¿ç”¨apiå’Œå®ç°">ç›´æ¥ä½¿ç”¨apiå’Œå®ç°<a class="hash-link" href="#ç›´æ¥ä½¿ç”¨apiå’Œå®ç°" title="Direct link to heading">â€‹</a></h5><ol><li><p>ç›´æ¥ä½¿ç”¨java common log æ¨¡å—: <code>use-jcl-log</code></p></li><li><p>ç›´æ¥ä½¿ç”¨log4j çš„apiå’Œå®ç° æ¨¡å—: <code>use-log4j</code></p></li><li><p>ç›´æ¥ä½¿ç”¨log4j2 çš„apiå’Œå®ç° æ¨¡å—: <code>use-log4j2-impl-and-log4j2-api</code></p></li><li><p>ç›´æ¥ä½¿ç”¨jdk-logging å®ç°å’Œapi æ¨¡å—: <code>use-jdk-logging</code></p></li><li><p>ç›´æ¥ä½¿ç”¨slf4j-apiå’Œslf4j-simpleç®€å•çš„æ—¥å¿—å®ç° æ¨¡å—: <code>slf4j-sample-impl</code></p></li></ol><h5 class="anchor anchorWithStickyNavbar_mojV" id="ä½¿ç”¨slf4jè‡ªå¸¦">ä½¿ç”¨slf4jè‡ªå¸¦<a class="hash-link" href="#ä½¿ç”¨slf4jè‡ªå¸¦" title="Direct link to heading">â€‹</a></h5><ol><li><p>ä½¿ç”¨slf4jçš„api,æ²¡æœ‰ä»»ä½•å®ç° æ¨¡å—: <code>nologImpl</code></p></li><li><p>ä½¿ç”¨slf4jçš„api, å¹¶ä¸”åŒæ—¶ä½¿ç”¨slf4f-nop,å’Œslf4j-sample å®ç° æ¨¡å—: <code>multilogImpl</code></p></li></ol><h5 class="anchor anchorWithStickyNavbar_mojV" id="ä½¿ç”¨ç¬¬ä¸‰æ–¹å®ç°-å’Œslf4j-çš„api">ä½¿ç”¨ç¬¬ä¸‰æ–¹å®ç° å’Œslf4j çš„api<a class="hash-link" href="#ä½¿ç”¨ç¬¬ä¸‰æ–¹å®ç°-å’Œslf4j-çš„api" title="Direct link to heading">â€‹</a></h5><ol><li><p>ä½¿ç”¨log4j çš„å®ç°,ç»“åˆslf4j çš„api æ¨¡å—: <code>user-log4jImpl-and-slf4japi</code></p></li><li><p>ä½¿ç”¨jdkçš„å®ç°,ç»“åˆslf4j çš„api æ¨¡å—: <code>use-jdk-logging-imple-and-sl4j-api</code></p></li><li><p>ä½¿ç”¨ jcl æ—¥å¿—å®ç°,ç»“åˆslf4jçš„api æ¨¡å—: <code>use-jcl-imple-and-slf4j-api</code></p></li><li><p>ä½¿ç”¨logbackçš„æ—¥å¿—å®ç°,ç»“åˆslf4jçš„api æ¨¡å—: <code>use-logback-imple-and-slf4j-api</code></p></li><li><p>ä½¿ç”¨log4j2 çš„æ—¥å¿—å®ç°,ç»“åˆslf4j çš„api æ¨¡å—: <code>use-log4j2-imple-and-slf4j-api</code></p></li></ol><h5 class="anchor anchorWithStickyNavbar_mojV" id="æ—¥å¿—åˆ‡æ¢å™¨å¼•ç”¨çš„æ¨¡å—ä½¿ç”¨äº†è‡ªå·±çš„æ—¥å¿—å®ç°å’Œapi-å°†æ—¥å¿—è¾“å‡ºåˆ‡æ¢åˆ°slf4j-ä¸Šé¢-é¡¹ç›®ä¸­å¸¸ç”¨å¸¸è§ä¾èµ–å¤„ç†">æ—¥å¿—åˆ‡æ¢å™¨,å¼•ç”¨çš„æ¨¡å—ä½¿ç”¨äº†è‡ªå·±çš„æ—¥å¿—å®ç°å’Œapi, å°†æ—¥å¿—è¾“å‡ºåˆ‡æ¢åˆ°slf4j ä¸Šé¢ (é¡¹ç›®ä¸­å¸¸ç”¨,å¸¸è§ä¾èµ–å¤„ç†)<a class="hash-link" href="#æ—¥å¿—åˆ‡æ¢å™¨å¼•ç”¨çš„æ¨¡å—ä½¿ç”¨äº†è‡ªå·±çš„æ—¥å¿—å®ç°å’Œapi-å°†æ—¥å¿—è¾“å‡ºåˆ‡æ¢åˆ°slf4j-ä¸Šé¢-é¡¹ç›®ä¸­å¸¸ç”¨å¸¸è§ä¾èµ–å¤„ç†" title="Direct link to heading">â€‹</a></h5><ol><li><p>jcl åˆ‡æ¢åˆ° slf4j , æœ€ç»ˆç”±logback æ‰“å° æ¨¡å—: <code>remove-common-logging-use-slf4j</code></p></li><li><p>log4j åˆ‡æ¢åˆ° slf4j ,æœ€ç»ˆç”±logback æ‰“å° æ¨¡å—: <code>remove-log4j-use-slf4j-and-use-logback-impl</code></p></li><li><p>jdk logging åˆ‡æ¢åˆ° slf4j,æœ€ç»ˆç”±logback æ‰“å° æ¨¡å—: <code>remove-jdk-loggin-use-slf4j-and-logback-impl</code></p></li></ol><blockquote><p>ç”±äºä½œè€…æ°´å¹³æœ‰é™, å‡ºç°çš„é”™è¯¯è¯·å¤šå¤šåŒ…å«. çƒ¦è¯·æŒ‡ç‚¹ä¸€äºŒ.</p></blockquote><p>æœ¬æ–‡ç®€ä¹¦åœ°å€: <a href="https://www.jianshu.com/p/7d12a8c25a38" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/7d12a8c25a38</a>
å…¨æ–‡ä¾‹å­å¦‚ä¸‹: <a href="https://gitee.com/imomoda/log4-study" target="_blank" rel="noopener noreferrer">https://gitee.com/imomoda/log4-study</a></p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/java/tags/java">java</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/java/tags/log">log</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about JAVA å¸¸è§æ—¥å¿—ä¾èµ–å¤„ç†ç»†èŠ‚" href="/java/java-log-adapter-study"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/java/java-threadpool-config-opt-adivse">ThreadPoolExecutorå‚æ•°è¯¦è§£å’Œä¼˜åŒ–å»ºè®®</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2019-02-03T00:00:00.000Z" itemprop="datePublished">February 3, 2019</time> Â· <!-- -->9 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://shanjiancaofu.com" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_o0gy" src="https://shanjiancaofu.com/img/avtor.png" alt="jeesk"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://shanjiancaofu.com" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">jeesk</span></a></div><small class="avatar__subtitle" itemprop="description">java engineer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">        ThreadPoolExecutor threadPoolExecutor = new ThreadPoolExecutor(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            5,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            20,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            TimeUnit.MINUTES,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new SynchronousQueue&lt;Runnable&gt;(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new ThreadFactory() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                public Thread newThread(Runnable r) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    return new Thread();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new RejectedExecutionHandler() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            });</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>æŒ‰ç…§ä¸Šé¢å‚æ•°é¡ºåºè®²è§£</p><ol><li>$\color{#FF0000}{corePoolSize æ ¸å¿ƒçº¿ç¨‹æ± æ•°é‡ }$</li></ol><ul><li>åˆ›å»ºçº¿ç¨‹æ± çš„æ—¶å€™æ²¡æœ‰çº¿ç¨‹, å½“æäº¤ä»»åŠ¡çš„æ—¶å€™ä¼šé™†ç»­åˆ›å»ºçº¿ç¨‹, å½“corePoolSize æ»¡çš„æ—¶å€™, ä¼šå°†ä»»åŠ¡æ”¾åˆ°é˜Ÿåˆ—ä¸­å», é˜Ÿåˆ—æ»¡äº†, é‚£ä¹ˆä¼šç»§ç»­åˆ›å»º corePoolIsze åˆ°maxPoolSizeä¹‹é—´çš„çº¿ç¨‹ .</li><li>è®¾ç½®allowCoreThreadTimeout=trueï¼ˆé»˜è®¤falseï¼‰æ—¶ï¼Œæ ¸å¿ƒçº¿ç¨‹ä¼šè¶…æ—¶å…³é—­</li><li>prestartAllCoreThread  æˆ–è€…prestartAllCoreThread åˆå§‹åŒ–æ ¸å¿ƒçº¿ç¨‹</li></ul><ol start="2"><li>$\color{#FF0000}{maxPoolSizeæœ€å¤§çº¿ç¨‹æ± æ•°é‡}$</li></ol><ul><li>å½“çº¿ç¨‹æ•°é‡ = maxPoolSize , ä¸”ä»»åŠ¡é˜Ÿåˆ—å·²ç»æ»¡äº†,  çº¿ç¨‹æ± ä¼šæ‹’ç»ä»»åŠ¡æŠ›å‡ºä¸€åœº</li><li>æˆ‘ä»¬çš„é¡¹ç›® è¿™ä¸ªå‚æ•°æ˜¯ Runtime.getRuntime().availableProcessors() * 4 +1 , æ ¹æ®å‹åŠ›æµ‹è¯•è·å¾—æœ€å¥½çš„æœ€å¤§æ ¸å¿ƒæ•°é‡</li></ul><ol start="3"><li>$\color{#FF0000}{keepAliveTime  çº¿ç¨‹ç©ºé—²æ—¶é—´}$</li></ol><ul><li>ç©ºé—²çš„çº¿ç¨‹èƒ½å¤Ÿä¿æŒç©ºé—²çš„æ—¶é—´, è¶…è¿‡è¿™ä¸ªæ—¶é—´, è¿™ä¸€éƒ¨åˆ†çº¿ç¨‹å°†è¢«å›æ”¶.</li><li>æ ¸å¿ƒçº¿ç¨‹åˆ°æœ€å¤§çº¿ç¨‹æ•°é‡çš„å·®å¼‚, å¦‚æœä¸¤ä¸ªå€¼ç›¸ç­‰, é‚£ä¹ˆè¿™ä¸ªå‚æ•°æ¯«æ— æ„ä¹‰.</li></ul><ol start="4"><li>$\color{#FF0000}{BlockingQueue é˜»å¡é˜Ÿåˆ—}$</li></ol><ul><li>å½“æ ¸å¿ƒçº¿ç¨‹æ•°è¾¾åˆ°æœ€å¤§æ—¶ï¼Œæ–°ä»»åŠ¡ä¼šæ”¾åœ¨é˜Ÿåˆ—ä¸­æ’é˜Ÿç­‰å¾…æ‰§è¡Œ</li><li>å¸¸è§çš„é˜Ÿåˆ—<ol><li>ArrayBlockingQueueï¼š æœ‰ç•Œé˜Ÿåˆ—ï¼ŒåŸºäºæ•°ç»„ç»“æ„ï¼ŒæŒ‰ç…§é˜Ÿåˆ—FIFOåŸåˆ™å¯¹å…ƒç´ æ’åºï¼›</li><li>LinkedBlockingQueueï¼šæ— ç•Œé˜Ÿåˆ—ï¼ŒåŸºäºé“¾è¡¨ç»“æ„ï¼ŒæŒ‰ç…§é˜Ÿåˆ—FIFOåŸåˆ™å¯¹å…ƒç´ æ’åºï¼ŒExecutors.newFixedThreadPool()ä½¿ç”¨äº†è¿™ä¸ªé˜Ÿåˆ—</li><li>SynchronousQueue åŒæ­¥é˜Ÿåˆ—, è¯¥é˜Ÿåˆ—ä¸å­˜å‚¨å…ƒç´ ï¼Œæ¯ä¸ªæ’å…¥æ“ä½œå¿…é¡»ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨ç§»é™¤æ“ä½œï¼Œå¦åˆ™æ’å…¥æ“ä½œä¼šä¸€ç›´è¢«é˜»å¡ï¼ŒExecutors.newCachedThreadPool()ä½¿ç”¨äº†è¿™ä¸ªé˜Ÿåˆ—ï¼›</li><li>PriorityBlockingQueueï¼šä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œå…·æœ‰ä¼˜å…ˆçº§çš„æ— é™é˜»å¡é˜Ÿåˆ—ã€‚</li></ol></li></ul><p>6  .   $\color{#FF0000}{ThreadFactory çº¿ç¨‹å·¥å‚}$</p><ul><li>è‡ªå®šä¹‰çº¿ç¨‹çš„åå­—,daemon,ä¼˜å…ˆçº§ç­‰</li></ul><ol start="7"><li>$\color{#FF0000}{rejectedExecutionHandler æ‹’ç»ç­–ç•¥}$</li></ol><ul><li>è¿™é‡Œçš„æ‹’ç»å¯ä»¥é‡‡å–ä½ è‡ªå®šä¹‰çš„åŠæ³•, æ¯”å¦‚ä½¿ç”¨second çº¿ç¨‹æ± å¤„ç† r , æˆ–è€…ä¸¢å¼ƒr, æˆ–è€…æ‰“å°å‡ºæ—¥å¿—, å–å†³äºä½ çš„ä¸šåŠ¡.</li><li>çº¿ç¨‹æ± æ‰§è¡Œæ‹’ç»çš„ä¸¤ç§æƒ…å†µ<ol><li>å½“çº¿ç¨‹æ•°é‡è¾¾åˆ°maxPoolSize , é˜Ÿåˆ—å·²ç»æ»¡äº†, ä¼šæ‹’ç»æ–°ä»»åŠ¡</li><li>å½“çº¿ç¨‹æ± è°ƒç”¨shutdown çš„æ—¶å€™, ä¼šç­‰å¾…çº¿ç¨‹æ± çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•, å†shutdown, è¿™æ˜¯ä¸€ç§ä¼˜é›…çš„æ–¹å¼.  è°ƒç”¨shutdownå’Œshutdownå…³é—­ä¹‹å‰, è¿™æ®µæ—¶é—´ä¼šæ‹’ç»æ–°ä»»åŠ¡. shutdownNow, ä¼šç«‹åˆ»å…³é—­, å¹¶ä¸”åœæ­¢æ‰§è¡Œä»»åŠ¡. å’Œshutdown æœ‰å¾ˆå¤§åŒºåˆ«.</li></ol></li><li>å‡ ç§æ‹’ç»ç­–ç•¥<ol><li>AbortPolicy ä¸¢å¼ƒä»»åŠ¡, æŠ›è¿è¡Œå¼‚å¸¸(å¦‚æœä¸è®¾ç½®, é»˜è®¤å°±æ˜¯è¿™ä¸€ä¸ªç­–ç•¥)</li><li>CallerRunsPolicy æ‰§è¡Œä»»åŠ¡</li><li>DiscardPolicy å¿½è§†ï¼Œä»€ä¹ˆéƒ½ä¸ä¼šå‘ç”Ÿ</li><li>DiscardOldestPolicy ä»é˜Ÿåˆ—ä¸­è¸¢å‡ºæœ€å…ˆè¿›å…¥é˜Ÿåˆ—ï¼ˆæœ€åä¸€ä¸ªæ‰§è¡Œï¼‰çš„ä»»åŠ¡</li></ol></li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="çº¿ç¨‹æ‰§è¡Œçš„ä¸€äº›æµç¨‹">çº¿ç¨‹æ‰§è¡Œçš„ä¸€äº›æµç¨‹<a class="hash-link" href="#çº¿ç¨‹æ‰§è¡Œçš„ä¸€äº›æµç¨‹" title="Direct link to heading">â€‹</a></h4><ol><li>å¦‚æœå½“å‰çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ç›® å°äº  &lt; corePoolSize ã€‚åˆ™å¯¹äºæ¯ä¸ªæ–°ä»»åŠ¡ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œè¿™ä¸ªä»»åŠ¡(å³ä½¿coreçº¿ç¨‹ä¸­ä¹Ÿæœ‰ç©ºé—²çº¿ç¨‹, ä¹Ÿä¼šæ–°åˆ›å»ºçº¿ç¨‹ä¼šæ‰§è¡Œ)ã€‚</li><li>å¦‚æœå½“å‰çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ç›® å¤§äºç­‰äº &gt;= corePoolSize ã€‚
å¯¹äºæ¯ä¸ªæ–°ä»»åŠ¡ï¼Œä¼šå°†å…¶æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚è‹¥æ·»åŠ æˆåŠŸï¼Œåˆ™ä»»åŠ¡ç”±ç©ºé—²çš„çº¿ç¨‹ä¸»åŠ¨å°†å…¶ä»é˜Ÿåˆ—ä¸­ç§»é™¤åæ‰§è¡Œã€‚è‹¥æ·»åŠ å¤±è´¥ï¼ˆä»»åŠ¡é˜Ÿåˆ—å·²æ»¡ï¼‰ï¼Œåˆ™å°è¯•åˆ›å»ºæ–°çš„çº¿ç¨‹æ‰§è¡Œã€‚</li><li>è‹¥å½“å‰çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ç›®åˆ°è¾¾ maximumPoolSize ï¼Œåˆ™å¯¹äºæ–°ä»»åŠ¡é‡‡å–æ‹’ç»ç­–ç•¥ã€‚</li><li>å¦‚æœçº¿ç¨‹æ± ä¸­çš„æ•°é‡å¤§äº corePoolSize æ—¶ï¼Œå¦‚æœæŸä¸ªçº¿ç¨‹ç©ºé—²æ—¶é—´è¶…è¿‡ keepAliveTime ï¼Œçº¿ç¨‹ä¼šè¢«ç»ˆæ­¢ï¼Œç›´åˆ°çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ç›®ä¸è¶…è¿‡ corePoolSize ã€‚</li><li>å¦‚æœä¸ºæ ¸å¿ƒçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹è®¾ç½®å­˜æ´»æ—¶é—´ï¼Œåˆ™å½“æ ¸å¿ƒçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ç©ºé—²æ—¶é—´è¶…è¿‡ keepAliveTime ï¼Œåˆ™è¯¥çº¿ç¨‹ä¹Ÿä¼šè¢«ç»ˆæ­¢</li><li>å¦‚æœæ ¸å¿ƒçº¿ç¨‹æ•°å·²ç»è¾¾åˆ°, å¦‚æœæ²¡æœ‰é˜Ÿåˆ—æ²¡æœ‰æ»¡çš„è¯, æ˜¯ä¸ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹. æœ‰æ—¶å€™å–å†³ä½ ä½¿ç”¨ä»€ä¹ˆé˜Ÿåˆ—. æ¯”å¦‚ä½¿ç”¨ ArrayBlockingQueue(10), å½“æ ¸å¿ƒçº¿ç¨‹å·²ç»åˆ›å»ºå®Œæˆ, åªæœ‰å½“é˜Ÿåˆ—æ»¡äº†ä¹‹åæ‰ä¼šç»§ç»­åˆ›å»ºæ–°çš„çº¿ç¨‹. å¦‚æœä½ ä½¿ç”¨çš„æ˜¯SynchronousQueue, å†…éƒ¨åªèƒ½ä¸€ä¸ªçš„é˜Ÿåˆ—,é‚£ä¹ˆåªæœ‰é˜Ÿåˆ—ç›´æ¥åˆ›å»ºcoreçº¿ç¨‹åˆ°maxpoolSize ä¹‹é—´çš„çº¿ç¨‹</li></ol><h4 class="anchor anchorWithStickyNavbar_mojV" id="çº¿ç¨‹æ± æ€§èƒ½ä¼˜åŒ–å»ºè®®">çº¿ç¨‹æ± æ€§èƒ½ä¼˜åŒ–å»ºè®®<a class="hash-link" href="#çº¿ç¨‹æ± æ€§èƒ½ä¼˜åŒ–å»ºè®®" title="Direct link to heading">â€‹</a></h4><ol><li>å»ºè®®ä½¿ç”¨ prestartAllCoreThread  æˆ–è€…prestartAllCoreThread åˆå§‹åŒ–æ ¸å¿ƒçº¿ç¨‹</li><li>è€ƒè™‘ allowCoreThreadTimeOut  å…è®¸æ ¸å¿ƒçº¿ç¨‹èƒ½å¤Ÿå›æ”¶èŠ‚çº¦æœºå™¨çš„ä½¿ç”¨.</li><li>æ‹’ç»ç­–ç•¥å¯ä»¥å°†ä»»åŠ¡, æäº¤ç»™ second çº¿ç¨‹æ± å¤„ç†.</li><li>è‡ªå®šä¹‰ThreadFactory ,æ ‡è¯†çº¿ç¨‹, æ–¹ä¾¿æ’æŸ¥çº¿ç¨‹çš„ä½¿ç”¨æƒ…å†µ</li></ol><h4 class="anchor anchorWithStickyNavbar_mojV" id="å…³äºçº¿ç¨‹å¼‚å¸¸æ˜¯å¦å¤„ç†çš„é—®é¢˜">å…³äºçº¿ç¨‹å¼‚å¸¸æ˜¯å¦å¤„ç†çš„é—®é¢˜:<a class="hash-link" href="#å…³äºçº¿ç¨‹å¼‚å¸¸æ˜¯å¦å¤„ç†çš„é—®é¢˜" title="Direct link to heading">â€‹</a></h4><ol><li>execute : å¦‚æœä¸æ‰‹åŠ¨æ•è·ä¸€åœº, çº¿ç¨‹æ± åªèƒ½é‡æ–°åˆ›å»ºæ–°çš„å¼‚å¸¸æ¥å¡«è¡¥ç©ºç™½ï¼Œé‡æ–°åˆ›å»ºçº¿ç¨‹è¿™æ˜¯æœ‰ä»£ä»·çš„</li><li>submit:   å› ä¸ºèƒ½å¤Ÿè°ƒç”¨ future.get(). æ‰€ä»¥æœ‰å¼‚å¸¸ä¹Ÿä¼šæ•è·, ä¸ä¼šé€ æˆçº¿ç¨‹ç»ˆæ­¢.</li></ol><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">// è¯æ˜execute çš„å¼‚å¸¸</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void test1() throws InterruptedException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Thread.setDefaultUncaughtExceptionHandler((Thread t, Throwable e) -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.warn(&quot;Exception in thread {}&quot;, t, e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String prefix = &quot;test&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ExecutorService threadPool = Executors.newFixedThreadPool(1, new ThreadUtil.ThreadFactoryImpl(prefix));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IntStream.rangeClosed(1, 10).forEach(i -&gt; threadPool.execute(() -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (i == 5) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(&quot;error&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.info(&quot;I&#x27;m done : {}&quot;, i);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(Thread.currentThread().getName() + &quot; I&#x27;m done : &quot; + i);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (i &lt; 5) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Assert.assertEquals(prefix + &quot;1&quot;,  Thread.currentThread().getName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Assert.assertEquals(prefix + &quot;2&quot;, Thread.currentThread().getName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        threadPool.shutdown();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        threadPool.awaitTermination(1, TimeUnit.HOURS);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æœ¬æ¥æ˜¯é€šè¿‡test 1 çº¿ç¨‹æ‰§è¡Œçš„, åé¢å‡ºç°å¼‚å¸¸ ç¡®æ˜¯test2 æ‰§è¡Œçš„, è¯´æ˜xçº¿ç¨‹å·²ç»ç»ˆæ­¢2, å¹¶ä¸”é‡æ–°åˆ›å»ºçº¿ç¨‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">// çº¿ç¨‹åç§°æ²¡æœ‰å˜, è¯´æ˜å·²ç»å¸®ä½ æ•è·å¼‚å¸¸.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">String prefix = &quot;test&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ExecutorService threadPool = Executors.newFixedThreadPool(1, new ThreadUtil.ThreadFactoryImpl(prefix));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;Future&gt; futures = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IntStream.rangeClosed(1, 10).forEach(i -&gt; futures.add(threadPool.submit(() -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (i == 5) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(&quot;error&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.info(&quot;I&#x27;m done : {}&quot;, i);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//            if (i &lt; 5) Assert.assertEquals(prefix + &quot;1&quot;, Thread.currentThread().getName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//            else Assert.assertEquals(prefix + &quot;2&quot;, Thread.currentThread().getName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        })));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (Future future : futures) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                future.get();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } catch (ExecutionException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                log.warn(&quot;future ExecutionException&quot;, e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        threadPool.shutdown();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        threadPool.awaitTermination(1, TimeUnit.HOURS);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="é¢è¯•é—®é¢˜">é¢è¯•é—®é¢˜<a class="hash-link" href="#é¢è¯•é—®é¢˜" title="Direct link to heading">â€‹</a></h4><ol><li>è¯´è¯´çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°æœ‰å“ªäº›</li><li>è¯´è¯´ä½ ä»¬çš„corePoolSize  çš„æ•°é‡æ˜¯å¦‚ä½•è®¾ç½®,è¶…æ—¶æ—¶é—´å¦‚ä½•è®¾ç½®</li><li>ä½ ä»¬ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆé˜Ÿåˆ—,  ä¸ºä»€ä¹ˆä½¿ç”¨è¿™ä¸ªé˜Ÿåˆ—.</li><li>ä½ ä»¬é¡¹ç›®æ˜¯å¦‚ä½•ä¼˜åŒ–è‡ªå·±çš„çº¿ç¨‹æ± å‚æ•°çš„.</li><li>å½“çº¿ç¨‹æ± è¿˜æ²¡è¾¾åˆ° corePoolSize çš„æ—¶å€™, çº¿ç¨‹æ± é‡Œé¢æœ‰ç©ºé—²çº¿ç¨‹, è¿™ä¸ªæ—¶å€™æ¥äº†ä¸€ä¸ªæ–°çš„ä»»åŠ¡, çº¿ç¨‹æ± æ˜¯åˆ›å»ºæ–°çš„çº¿ç¨‹è¿˜æ˜¯ä½¿ç”¨ç©ºé—²çº¿ç¨‹ ?</li></ol><blockquote><p> è·¯è¿‡ç‚¹èµ, æœˆå…¥10w</p></blockquote></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/java/tags/java">java</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/java/tags/log">log</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about ThreadPoolExecutorå‚æ•°è¯¦è§£å’Œä¼˜åŒ–å»ºè®®" href="/java/java-threadpool-config-opt-adivse"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/java/log4j-print-log">log4jæ‰“å°æ—¥å¿—çš„åŸç†</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2018-12-01T00:00:00.000Z" itemprop="datePublished">December 1, 2018</time> Â· <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://shanjiancaofu.com" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_o0gy" src="https://shanjiancaofu.com/img/avtor.png" alt="jeesk"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://shanjiancaofu.com" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">jeesk</span></a></div><small class="avatar__subtitle" itemprop="description">java engineer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>log4j-slf4j-impl: log4jçš„æ—¥å¿—è½¬åˆ°slf4jä¸Š</p><p>LoggerFactory.getLogger () æ–¹æ³• å¯»æ‰¾å¯¹åº”çš„logger</p><p>org.slf4j.LoggerFactory#findPossibleStaticLoggerBinderPathSet
å¯»æ‰¾staticLoggerBinder</p><p>paths = loggerFactoryClassLoader.getResources(STATIC_LOGGER_BINDER_PATH);
é€šè¿‡è·¯å¾„å¯»æ‰¾æ‰€æœ‰çš„binder, è¿™é‡Œçš„STATIC_LOGGER_BINDER_PATH = org/slf4j/impl/StaticLoggerBinder.class, æ¯ä¸ªslf4jçš„å…·ä½“å®ç°ç±»éƒ½æœ‰ä¸€ä¸ªStaticLoggerBinder.class</p><p>org.slf4j.LoggerFactory#reportMultipleBindingAmbiguity
åˆ¤æ–­æ˜¯å¦æœ‰å¤šä¸ªbinder, å¦‚æœæœ‰å°†ä¼šæ‰“å°æ—¥å¿—: SLF4J: Class path contains multiple SLF4J bindings. SLF4J: Found binding in <!-- -->[jar:file:/Z:/repository/org/slf4j/slf4j-simple/1.7.28/slf4j-simple-1.7.28.jar!/org/slf4j/impl/StaticLoggerBinder.class]<!-- --> SLF4J: Found binding in <!-- -->[jar:file:/Z:/repository/org/slf4j/slf4j-nop/1.7.28/slf4j-nop-1.7.28.jar!/org/slf4j/impl/StaticLoggerBinder.class]<!-- --> SLF4J: See <a href="http://www.slf4j.org/codes.html#multiple_bindings" target="_blank" rel="noopener noreferrer">http://www.slf4j.org/codes.html#multiple_bindings</a> for an explanation.., è¿™ä¸ªæ—¥å¿—æ˜¯æˆ‘ä»¬å¸¸è§çš„, å› ä¸ºæœ‰å¤šä¸ªæ—¥å¿—å®ç°</p><p>org/slf4j/impl/StaticLoggerBinder.class, æ¯ä¸ªslf4jçš„æ—¥å¿—å®ç°éƒ½æœ‰è¿™ä¸ªç±»
æ‰¾åˆ°æ‰€æœ‰ç»‘å®šçš„logger</p><p>è°ƒç”¨ StaticLoggerBinder.getSingleton();
è¿™é‡Œå¦‚æœæœ‰å¤šä¸ªclass, åº”è¯¥æ˜¯æŒ‰é¡ºåºè°ƒç”¨ç¬¬ä¸€ä¸ªclassçš„getSingleton(),
è°ƒç”¨ reportActualBinding
æ‰“å°ç»‘å®šçš„æ˜¯å“ªä¸€ä¸ªæ—¥å¿—å®ç°
SLF4J: Actual binding is of type <!-- -->[org.slf4j.impl.SimpleLoggerFactory]<!-- -->
getILoggerFactory()
è·å¾—åˆ°åˆšæ‰StaticLoggerBinderçš„æ—¥å¿—å·¥å‚
SimpleLoggerFactory.getLogger
public Logger getLogger(String name) {
Logger simpleLogger = (Logger)this.loggerMap.get(name);
if (simpleLogger != null) {
return simpleLogger;
} else {
Logger newInstance = new SimpleLogger(name);
Logger oldInstance = (Logger)this.loggerMap.putIfAbsent(name, newInstance);
return (Logger)(oldInstance == null ? newInstance : oldInstance);
}
}
æŒ‡å®šçš„logger ä½œç¼“å­˜, ç„¶åè°ƒç”¨info() æ–¹æ³•æ‰“å°æ—¥å¿—.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/java/tags/java">java</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/java/tags/log">log</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about log4jæ‰“å°æ—¥å¿—çš„åŸç†" href="/java/log4j-print-log"><b>Read More</b></a></div></footer></article></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Repository</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/jeesk" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://gitee.com/jeesk" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">GithubåŠ é€Ÿå™¨</div><ul class="footer__items"><li class="footer__item"><a href="https://toolwa.com/github/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>toolwa<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="http://shrill-pond-3e81.hunsh.workers.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>hunsh<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 å±±é—´è‰å¤«, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d6c809c7.js"></script>
<script src="/assets/js/main.0c9f8076.js"></script>
</body>
</html>